[gd_scene load_steps=14 format=3 uid="uid://lv8sdofmjhf3"]

[ext_resource type="Script" path="res://_Scripts/Minigame_Save_Controller.gd" id="1_f0fiw"]
[ext_resource type="Script" path="res://_Scripts/StateMachineMinigames/StateMachineMinigames.gd" id="2_12384"]
[ext_resource type="Script" path="res://_Scripts/StateMachineMinigames/ConsignaState.gd" id="3_cy1k7"]
[ext_resource type="Script" path="res://_Scripts/StateMachineMinigames/Button_Change_StateMinigame.gd" id="4_0gq0b"]
[ext_resource type="Script" path="res://_Scripts/StateMachineMinigames/JuegoState.gd" id="5_ks8gw"]
[ext_resource type="Script" path="res://_Scripts/StateMachineMinigames/MoralejaState.gd" id="6_43bfo"]
[ext_resource type="Texture2D" uid="uid://ci6cxlnsy21yc" path="res://Sprites/Quartz.png" id="6_hnplu"]
[ext_resource type="PackedScene" uid="uid://djhg7jvxtexyl" path="res://Scenes/UI_Scenes/btn_Change_Scene.tscn" id="7_itn4t"]
[ext_resource type="Script" path="res://_Scripts/MinG_RockFigther/RockSpriteContoller.gd" id="7_sfnul"]
[ext_resource type="PackedScene" uid="uid://byauyjvexvbuc" path="res://Scenes/Experiments/ShardEmitter.tscn" id="8_urdon"]
[ext_resource type="Script" path="res://_Scripts/StateMachineMinigames/Timer_State_Minigame.gd" id="9_cj3ki"]

[sub_resource type="LabelSettings" id="LabelSettings_h74ab"]
font_size = 60
font_color = Color(0.145098, 0.733333, 0.32549, 1)

[sub_resource type="LabelSettings" id="LabelSettings_ynvg5"]
font_size = 40
font_color = Color(0, 0, 0, 1)

[node name="RockFighters" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Background" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.72549, 1, 1, 1)

[node name="RockFighters" type="Node" parent="."]
script = ExtResource("1_f0fiw")

[node name="Control" type="Control" parent="RockFighters"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Background" type="ColorRect" parent="RockFighters/Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.72549, 1, 1, 1)

[node name="StateMachine" type="Node" parent="RockFighters" node_paths=PackedStringArray("initial_state")]
script = ExtResource("2_12384")
initial_state = NodePath("Juego")

[node name="Consigna" type="Node" parent="RockFighters/StateMachine"]
script = ExtResource("3_cy1k7")
Consignas = ["Hey esto es una consigna"]

[node name="Contenido" type="Control" parent="RockFighters/StateMachine/Consigna"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="LblConsigna" type="Label" parent="RockFighters/StateMachine/Consigna/Contenido"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -270.0
offset_top = -444.0
offset_right = 294.0
offset_bottom = 445.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 40
text = "Consigna genérica Consigna genérica Consigna genérica"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="Button" type="Button" parent="RockFighters/StateMachine/Consigna/Contenido" node_paths=PackedStringArray("state_to_change", "state_machine")]
visible = false
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -201.0
offset_top = -197.0
offset_right = 202.0
offset_bottom = -67.0
grow_horizontal = 2
grow_vertical = 0
text = "Siguiente
"
script = ExtResource("4_0gq0b")
state_to_change = NodePath("../../../Juego")
state_machine = NodePath("../../..")

[node name="Timer" type="Timer" parent="RockFighters/StateMachine/Consigna/Contenido"]
wait_time = 3.0

[node name="Juego" type="Node" parent="RockFighters/StateMachine" node_paths=PackedStringArray("NextState", "StateMachine")]
script = ExtResource("5_ks8gw")
NextState = NodePath(".")
StateMachine = NodePath("..")
InstanciasMinijuego = [NodePath("Contenido/Instancia1")]

[node name="Contenido" type="Control" parent="RockFighters/StateMachine/Juego"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Instancia1" type="Control" parent="RockFighters/StateMachine/Juego/Contenido"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Consigna" type="Label" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -299.0
offset_top = 69.0
offset_right = 299.0
offset_bottom = 155.0
grow_horizontal = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "Elige "
label_settings = SubResource("LabelSettings_h74ab")
horizontal_alignment = 1

[node name="Consigna2" type="Label" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.5
anchor_right = 0.5
offset_left = -360.0
offset_top = 192.0
offset_right = 360.0
offset_bottom = 298.0
grow_horizontal = 2
text = "Quien es el luchador mas duro"
label_settings = SubResource("LabelSettings_ynvg5")
horizontal_alignment = 1

[node name="Button" type="Button" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1" node_paths=PackedStringArray("state_to_change", "state_machine")]
visible = false
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -161.0
offset_top = -165.0
offset_right = 161.0
offset_bottom = -52.0
grow_horizontal = 2
grow_vertical = 0
text = "Complete"
script = ExtResource("4_0gq0b")
state_to_change = NodePath("../../../../Moraleja")
state_machine = NodePath("../../../..")
isEndOfGame = true

[node name="Fluorita" type="Control" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_top = -201.0
offset_right = 337.0
offset_bottom = 445.0
grow_horizontal = 2
grow_vertical = 2

[node name="Perdedor" type="Button" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1/Fluorita"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -159.5
offset_top = -128.0
offset_right = 159.5
grow_horizontal = 2
grow_vertical = 0
text = "FLUORITA"

[node name="Fluorita" type="Sprite2D" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1/Fluorita"]
position = Vector2(167, 177)
scale = Vector2(0.568, 0.568)
texture = ExtResource("6_hnplu")
script = ExtResource("7_sfnul")

[node name="Timer" type="Timer" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1/Fluorita/Fluorita" node_paths=PackedStringArray("state_to_change", "state_machine")]
wait_time = 5.0
one_shot = true
script = ExtResource("9_cj3ki")
state_to_change = NodePath("../../../../../../Moraleja")
state_machine = NodePath("../../../../../..")

[node name="ShardEmitter" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1/Fluorita/Fluorita" instance=ExtResource("8_urdon")]
position = Vector2(5.28168, 36.9719)

[node name="Cuarzo" type="Control" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -334.0
offset_top = -179.0
offset_right = -1.0
offset_bottom = 447.0
grow_horizontal = 2
grow_vertical = 2

[node name="Ganador" type="Button" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1/Cuarzo"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -159.5
offset_top = -128.0
offset_right = 159.5
grow_horizontal = 2
grow_vertical = 0
text = "CUARZO"

[node name="Cuarzo2" type="Sprite2D" parent="RockFighters/StateMachine/Juego/Contenido/Instancia1/Cuarzo"]
position = Vector2(185, 155)
scale = Vector2(0.568, 0.568)
texture = ExtResource("6_hnplu")

[node name="Moraleja" type="Node" parent="RockFighters/StateMachine"]
script = ExtResource("6_43bfo")
Moralejas = [null, "El cuarzo es más duro que la flourita"]

[node name="Contenido" type="Control" parent="RockFighters/StateMachine/Moraleja"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="LblMoraleja" type="Label" parent="RockFighters/StateMachine/Moraleja/Contenido"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -270.0
offset_top = -444.0
offset_right = 294.0
offset_bottom = 445.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 40
text = "Consigna genérica Consigna genérica Consigna genérica"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="Button" type="Button" parent="RockFighters/StateMachine/Moraleja/Contenido" node_paths=PackedStringArray("state_to_change", "state_machine")]
visible = false
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -201.0
offset_top = -197.0
offset_right = 202.0
offset_bottom = -67.0
grow_horizontal = 2
grow_vertical = 0
text = "que?
"
script = ExtResource("4_0gq0b")
state_to_change = NodePath("../../../Juego")
state_machine = NodePath("../../..")

[node name="Timer" type="Timer" parent="RockFighters/StateMachine/Moraleja/Contenido"]
wait_time = 3.0
one_shot = true

[node name="ButtonChangeScene" parent="RockFighters/StateMachine/Moraleja/Contenido" instance=ExtResource("7_itn4t")]
visible = false
layout_mode = 1
offset_left = -197.0
offset_top = -201.0
offset_right = 207.0
offset_bottom = -66.0
text = "Continue"
NextScene = "Map_Screen"

[connection signal="pressed" from="RockFighters/StateMachine/Consigna/Contenido/Button" to="RockFighters/StateMachine/Consigna/Contenido/Button" method="_on_pressed" flags=18]
[connection signal="timeout" from="RockFighters/StateMachine/Consigna/Contenido/Timer" to="RockFighters/StateMachine/Consigna" method="TimeOut" flags=18]
[connection signal="EndOfGame" from="RockFighters/StateMachine/Juego/Contenido/Instancia1/Button" to="RockFighters" method="Set_Complete" flags=18]
[connection signal="EndOfGame" from="RockFighters/StateMachine/Juego/Contenido/Instancia1/Button" to="RockFighters/StateMachine/Moraleja" method="isEndOfGame" flags=18]
[connection signal="pressed" from="RockFighters/StateMachine/Juego/Contenido/Instancia1/Button" to="RockFighters/StateMachine/Juego/Contenido/Instancia1/Button" method="_on_pressed" flags=18]
[connection signal="pressed" from="RockFighters/StateMachine/Juego/Contenido/Instancia1/Fluorita/Perdedor" to="RockFighters/StateMachine/Juego/Contenido/Instancia1/Fluorita/Fluorita" method="RockDefeat"]
[connection signal="timeout" from="RockFighters/StateMachine/Juego/Contenido/Instancia1/Fluorita/Fluorita/Timer" to="RockFighters/StateMachine/Juego/Contenido/Instancia1/Fluorita/Fluorita/Timer" method="_on_timeout"]
[connection signal="pressed" from="RockFighters/StateMachine/Juego/Contenido/Instancia1/Cuarzo/Ganador" to="RockFighters/StateMachine/Juego/Contenido/Instancia1/Fluorita/Fluorita" method="RockDefeat"]
[connection signal="pressed" from="RockFighters/StateMachine/Moraleja/Contenido/Button" to="RockFighters/StateMachine/Moraleja/Contenido/Button" method="_on_pressed" flags=18]
[connection signal="timeout" from="RockFighters/StateMachine/Moraleja/Contenido/Timer" to="RockFighters/StateMachine/Moraleja" method="TimeOut" flags=18]
